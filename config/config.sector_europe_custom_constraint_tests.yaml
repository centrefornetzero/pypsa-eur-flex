# SPDX-FileCopyrightText: Contributors to PyPSA-Eur <https://github.com/pypsa/pypsa-eur>
#
# SPDX-License-Identifier: CC0-1.0

private:
  keys:
    entsoe_api: 53f9250b-91d3-4d15-af4f-c0b8b1f155e2

run:
  name: "" # use this to keep track of runs with different settings -- but if I change the name it doesn't run? 
  disable_progressbar: false

# docs in https://pypsa-eur.readthedocs.io/en/latest/configuration.html#foresight
foresight: myopic

scenario:
  clusters:
  - 39
  sector_opts:
  - ''
  planning_horizons:
  - 2020
  - 2030
  - 2040
  - 2050

countries: ['AL', 'AT', 'BA', 'BE', 'BG', 'CH', 'CZ', 'DE', 'DK', 'EE', 'ES', 'FI', 'FR', 'GB', 'GR', 'HR', 'HU', 'IE', 'IT', 'LT', 'LU', 'LV', 'ME', 'MK', 'NL', 'NO', 'PL', 'PT', 'RO', 'RS', 'SE', 'SI', 'SK', 'XK']

snapshots:
  start: "2019-01-01"
  end: "2020-01-01"
  inclusive: 'left'

co2_budget:
  2020: 0.720 #average emissions of 2019 to 2021 relative to 1990, CO2 excl LULUCF, EEA data, European Environment Agency. (2023a). Annual European Union greenhouse gas inventory 1990–2021 and inventory report 2023 - CRF Table. https://unfccc.int/documents/627830
  2025: 0.648 # With additional measures (WAM) projection, CO2 excl LULUCF, European Environment Agency. (2023e). Member States’ greenhouse gas (GHG) emission projections 2023. https://www.eea.europa.eu/en/datahub/datahubitem-view/4b8d94a4-aed7-4e67-a54c-0623a50f48e8
  2030: 0.450 # 55% reduction by 2030 (Ff55)
  2035: 0.250
  2040: 0.100 # 90% by 2040
  2045: 0.050
  2050: 0.050 #to not force no carbon emissions during the overnight scenario, since it does not solve?


electricity:
  co2limit_enable: false
  co2limit: 100.e+6

  extendable_carriers:
    Generator: [solar, solar-hsat, onwind, offwind-ac, offwind-dc, offwind-float] #, OCGT, CCGT, coal, lignite, geothermal, biomass, oil]
    StorageUnit: [battery]
    Store: [battery, H2] #[H2], but I want to give the model an option to use batteries for more long term storage
    Link: [H2 pipeline]

  renewable_carriers: [solar, solar-hsat, onwind, offwind-ac, offwind-dc, offwind-float, hydro]
  conventional_carriers: [nuclear, oil, OCGT, CCGT, coal, lignite, geothermal, biomass]
  powerplants_filter: (DateOut >= 2020 or DateOut != DateOut)

transmission_limit: vopt
atlite:
  cutout_directory: cutouts
  default_cutout: europe-2019-sarah3-era5
  nprocesses: 4 
  cutouts:
    europe-2019-sarah3-era5:
      module: [sarah, era5] # in priority order
      x: [-12., 42.]
      y: [33., 72.]
      dx: 0.3
      dy: 0.3
      time: ["2019", "2019"]

renewable:
  onwind:
    cutout: europe-2019-sarah3-era5
  offwind-ac:
    cutout: europe-2019-sarah3-era5
  offwind-dc:
    cutout: europe-2019-sarah3-era5
  offwind-float:
    cutout: europe-2019-sarah3-era5
  solar:
    cutout: europe-2019-sarah3-era5
  solar-hsat:
    cutout: europe-2019-sarah3-era5
  hydro:
    cutout: europe-2019-sarah3-era5

## CUSTOM CONSTRAINTS OF FIRST TECHNOLOGY OCCURANCE (MODELLED AFTER FUNCTION IN PYPSA DE)
#first_technology_occurrence:
#  Generator:
#    onwind: 2040 
  #Link: #preventing all hydrogen technologies until 2030 
  #  SMR: 2040 #first occurance of SMR in 2040 will change the results from the run yesterday (June 3), where the SMR link has an installed capcity of approx 16 GW in 2030)
  #  SMR_cc: 2040 
  #  H2 pipeline: 2040
  #  H2 Electrolysis: 2040 
  #  H2 Fuel Cell: 2040
  #Store:
  #  H2 Store: 2040 

limit_capacity_by_country : false #false means that the limits applied to all of Europe, true means the structure has to mimic pypsa DE and apply to the whole country
## CUSTOM CONSTRAINT of Carrier Specific Capcity Growth (Modelled AFTER FUNCTION IN PYPSA DE)
limits_capacity_max: #if this config flag is here, it triggers the capacity limits (sense = maximum)
  Generator:
    onwind: # in GW
    2020: 100
    2030: 100
    2040: 100
    2050: 100

#limits_capacity_min: #if this config flag is here, it triggers the capacity limits (sense = minimum)
#  Generator:
#    onwind: # in GW
#      2020: 350
#      2030: 350
#      2040: 350
#      2050: 350

      





# regulate what components with which carriers are kept from PyPSA-Eur;
# some technologies are removed because they are implemented differently
# (e.g. battery or H2 storage) or have different year-dependent costs
# in PyPSA-Eur-Sec
pypsa_eur: #I think I need to add in conventional generators and buses into the file here, because right now the electric component carriers 
#are only the carriers that are given here, I think what is happening is that pypsa-eur when merging with the sector additions gets trimmed, and it's pruning too much

  Bus:
  - AC  
  - gas
  - lignite
  - coal 
  #- import export tracker
  - oil
  - biomass 
  Link:
  - DC
  ## commenting these out to see if it will allow pypsa eur run on April 25 to bring back the emissions for these generators
  - OCGT
  - CCGT
  - lignite
  - biomass
  - oil
  - coal 
  Generator:
  - onwind
  - offwind-ac
  - offwind-dc
  - offwind-float
  - solar-hsat
  - solar
  - ror
  - nuclear
  #- biomass
  #- coal
  #- OCGT
  #- CCGT
  #- lignite
  #- solid biomass #because this is included in sector, does it need to be included here? #including this didn't make solid biomass have a carbon value, also it's still included in links, my guess
  - geothermal 
  #- oil #once removed oil because agriculture and industry were not solving as sectors, kept saying that the spatial.nodes.oil bus wasn't created in scripts/prepare_sector_network.py, so maybe it's because oil should be considered a carrier not a generator
  #led to biomass being used everywhere??? [Friday April 25], and a huge huge overestimation of generation 
  StorageUnit:
  - PHS
  - hydro
  Store: []


# docs in https://pypsa-eur.readthedocs.io/en/latest/configuration.html#existing-capacities
existing_capacities:
  grouping_years_power: [1920, 1950, 1955, 1960, 1965, 1970, 1975, 1980, 1985, 1990, 1995, 2000, 2005, 2010, 2015, 2019]
  grouping_years_heat: [1980, 1985, 1990, 1995, 2000, 2005, 2010, 2015, 2019] # heat grouping years >= baseyear will be ignored
  threshold_capacity: 10
  default_heating_lifetime: 20
  conventional_carriers:
  - lignite
  - coal
  - oil
  - uranium


sector:
  transport: true
  heating: true
  biomass: true
  industry: true #this doesn't work for lack of fischer-tropsch buses #that is solved if you put oil in bus: and link: under pypsa_eur
  agriculture: true #doesn't work for lack of EU agricultural machinery oil bus #this is solved if you putp oil in bus: and link" under pypsa_eur 
  fossil_fuels: true
  shipping: true
  aviation: true
  regional_oil_demand: false #because both industry and agriculture wouldn't solve because it couldn't find the EU oil bus, does this help? NO this made it worse
  #bev_dsm_restriction_value: 0 # was 0.75, set to 0 for no restriction on BEV DSM
  #bev_dsm_availability: 1 #0.5 turning from 0.5 to 1 (which I think is all)
  #tes_tau:
  #  decentral: 6 #was 3, doubling time constant in decentralized thermal energy storage #days 
  #  central: 280 #was 180, adding more time to extend time constant for centralized energy storage.
  conventional_generation:
    OCGT: gas
    lignite: lignite 
    coal: coal 
    CCGT: gas

  bev_dsm: true  #set to 1/2 the electric vehicle fleet initially
  v2g: true  #set to the above
  land_transport_fuel_cell_share:
    2020: 0
    2025: 0
    2030: 0
    2035: 0
    2040: 0
    2045: 0
    2050: 0
  land_transport_electric_share:
    2020: 0
    2025: 0.15
    2030: 0.3
    2035: 0.45
    2040: 0.7
    2045: 0.85
    2050: 1
  land_transport_ice_share:
    2020: 1
    2025: 0.85
    2030: 0.7
    2035: 0.55
    2040: 0.3
    2045: 0.15
    2050: 0

  shipping_hydrogen_share:
    2020: 0
    2025: 0
    2030: 0
    2035: 0
    2040: 0
    2045: 0
    2050: 0
  shipping_methanol_share:
    2020: 0
    2025: 0.15
    2030: 0.3
    2035: 0.5
    2040: 0.7
    2045: 0.85
    2050: 1
  shipping_oil_share:
    2020: 1
    2025: 0.85
    2030: 0.7
    2035: 0.5
    2040: 0.3
    2045: 0.15
    2050: 0

  tes: true 
  boilers: true #gas heating, yeah that's what is happening now
  resistive_heaters: true #resistive heating using electricity, yes
  solar_thermal: true
  boiers: true 
  oil_boilers: false
  biomass_boilers: true 

  methanation: false #no methanation for now 
  coal_cc: false
  dac: false #true, no direct air capture 
  co2_vent: false
  central_heat_vent: true
  allam_cycle_gas: false

  regional_co2_sequestration_potential:
    enable: false
    attribute:
    - conservative estimate Mt
    - conservative estimate GAS Mt
    - conservative estimate OIL Mt
    - conservative estimate aquifer Mt
    include_onshore: false
    min_size: 3
    max_size: 25
    years_of_storage: 25
  co2_sequestration_potential:
    2020: 0
    2025: 0
    2030: 50
    2035: 100
    2040: 200
    2045: 200
    2050: 200
  co2_sequestration_cost: 10
  co2_sequestration_lifetime: 50
  co2_spatial: false
  co2_network: false
  co2_network_cost_factor: 1
  cc_fraction: 0.9


  methanol: 
    regional_methanol_demand: false
    methanol_reforming: false
    methanol_reforming_cc: false
    methanol_to_kerosene: false
    methanol_to_power:
      ccgt: false
      ccgt_cc: false
      ocgt: false
      allam: false
    biomass_to_methanol: false
    biomass_to_methanol_cc: false

  hydrogen_fuel_cell: true 
  hydrogen_turbine: false
  SMR: true
  SMR_cc: true 
  gas_network: true #add existing gas network 
  H2_retrofit: false #for simplified version, don't need hydrogen retrofit, but the model can build hydrogen completely from new 
  #The rest of the defaults I agree with 
  chp:
    enable: true
    fuel:
    - solid biomass # For solid biomass, CHP with and without CC are added
    - gas # For all other fuels the same techno economic data from gas CHP is taken
  electricity_distribution_grid: true
 
biomass_to_liquid: false
biomass_to_liquid_cc: false
electrobiofuels: false
biosng: false
biosng_cc: false
bioH2: false
municipal_solid_waste: false

limit_max_growth:
    enable: false
    # allowing 30% larger than max historic growth
    factor: 1.05 # 5% larger than max historic growth
    max_growth:  # unit GW, the historical maximum growth of a carrier 
      H2: 30
      #onwind: 16 # onshore max grow so far 16 GW in Europe https://www.iea.org/reports/renewables-2020/wind
      #solar: 28 # solar max grow so far 28 GW in Europe https://www.iea.org/reports/renewables-2020/solar-pv
      #offwind-ac: 35 # offshore max grow so far 3.5 GW in Europe https://windeurope.org/about-wind/statistics/offshore/european-offshore-wind-industry-key-trends-statistics-2019/
      #offwind-dc: 35
    max_relative_growth:
      H2: 0.05 # 30% relative growth
      #onwind: 3
      #solar: 3
      #offwind-ac: 3
      #offwind-dc: 3


enhanced_geothermal:
  enable: false
  flexible: true
  max_hours: 240
  max_boost: 0.25
  var_cf: true
  sustainability_factor: 0.0025
solid_biomass_import:
  enable: false
  price: 54 #EUR/MWh
  max_amount: 1390 # TWh
  upstream_emissions_factor: .1 #share of solid biomass CO2 emissions at full combustion

lines:
  dynamic_line_rating:
    activate: false
    cutout: europe-2019-sarah3-era5
    max_line_rating: 1.3


# docs in https://pypsa-eur.readthedocs.io/en/latest/configuration.html#costs
costs:
  year: 2030
  version: v0.10.1
  social_discountrate: 0.02
  fill_values:
    FOM: 0
    VOM: 0
    efficiency: 1
    fuel: 0
    investment: 0
    lifetime: 25
    "CO2 intensity": 0 #global carbon constraint uses co2 atmosphere store, co2 intensity defines the efficiency of links from original stores to buses.
    "discount rate": 0.07
  overwrites: {} 
  capital_cost: #added because there was geothermal produced in Italy even though there was a capital cost that should have been included. 
    geothermal: 6983145.710599946  #added because there was geothermal produced in Italy even though there was a capital cost that should have been included. 
  marginal_cost:
    solar: 0.01
    onwind: 0.015
    offwind: 0.015
    hydro: 0.
    H2: 0.
    electrolysis: 0.
    fuel cell: 0.
    battery: 0.
    battery inverter: 0.
  emission_prices:
    enable: false
    co2: 0.
    co2_monthly_prices: false


clustering:
  aggregation_strategies:
    generators:
      committable: any
      ramp_limit_up: max
      ramp_limit_down: max
  temporal:
    resolution_elec: false #should only be used if the network is purely electric, otherwise use resolution_sector for sector-coupled network 
    resolution_sector: 6H #should be 3 hours for best study temporal resolution


solving:
  options:
    curtailment_mode: false

  #agg_p_nom_limits:
  #  agg_offwind: false
  #  include_existing: false
  #  file: data/agg_p_nom_minmax.csv



  solver:
    name: gurobi
    options: gurobi-default
